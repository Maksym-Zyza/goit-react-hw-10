(this["webpackJsonpgoit-react-hw-10"]=this["webpackJsonpgoit-react-hw-10"]||[]).push([[0],{23:function(e,t,r){"use strict";var n=r(15),c=r.n(n),a=r(20),u=r(17),o=r.n(u),i=r(3);o.a.defaults.baseURL="https://lpj-tasker.herokuapp.com";var s=function(e){o.a.defaults.headers.common.Authorization="Bearer ".concat(e)},l=function(){o.a.defaults.headers.common.Authorization=""};t.a={register:function(e){return function(){var t=Object(a.a)(c.a.mark((function t(r){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(i.a.registerRequest()),t.prev=1,t.next=4,o.a.post("/users/signup",e);case 4:n=t.sent,s(n.data.token),r(i.a.registerSuccess(n.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),r(i.a.registerError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logOut:function(){return function(){var e=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(i.a.logoutRequest()),e.prev=1,e.next=4,o.a.post("/users/logout");case 4:l(),t(i.a.logoutSuccess()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(i.a.logoutError(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},logIn:function(e){return function(){var t=Object(a.a)(c.a.mark((function t(r){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(i.a.loginRequest()),t.prev=1,t.next=4,o.a.post("/users/login",e);case 4:n=t.sent,s(n.data.token),r(i.a.loginSuccess(n.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),r(i.a.loginError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(a.a)(c.a.mark((function e(t,r){var n,a,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r(),a=n.auth.token){e.next=3;break}return e.abrupt("return");case 3:return s(a),t(i.a.getCurrentUserRequest()),e.prev=5,e.next=8,o.a.get("/users/current");case 8:u=e.sent,t(i.a.getCurrentUserSuccess(u.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t(i.a.getCurrentUserError(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,r){return e.apply(this,arguments)}}()}}},3:function(e,t,r){"use strict";var n=r(1),c=Object(n.b)("auth/registerRequest"),a=Object(n.b)("auth/registerSuccess"),u=Object(n.b)("auth/registerError"),o=Object(n.b)("auth/loginRequest"),i=Object(n.b)("auth/loginSuccess"),s=Object(n.b)("auth/loginError"),l=Object(n.b)("auth/logoutRequest"),b=Object(n.b)("auth/logoutSuccess"),d=Object(n.b)("auth/logoutError"),f=Object(n.b)("auth/getCurrentUserRequest"),g=Object(n.b)("auth/getCurrentUserSuccess"),j=Object(n.b)("auth/getCurrentUserError");t.a={registerRequest:c,registerSuccess:a,registerError:u,logoutRequest:l,logoutSuccess:b,logoutError:d,loginRequest:o,loginSuccess:i,loginError:s,getCurrentUserRequest:f,getCurrentUserSuccess:g,getCurrentUserError:j}},43:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0),c=r.n(n),a=(r(76),function(e){var t=e.children;return c.a.createElement("div",{className:"Container"},t)})},46:function(e,t,r){e.exports=r.p+"static/media/default-avatar.ccafcf34.png"},48:function(e,t,r){e.exports=r(81)},7:function(e,t,r){"use strict";r.d(t,"i",(function(){return c})),r.d(t,"j",(function(){return a})),r.d(t,"h",(function(){return u})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return s})),r.d(t,"f",(function(){return l})),r.d(t,"g",(function(){return b})),r.d(t,"e",(function(){return d})),r.d(t,"l",(function(){return f})),r.d(t,"m",(function(){return g})),r.d(t,"k",(function(){return j})),r.d(t,"d",(function(){return O}));var n=r(1),c=Object(n.b)("todos/fetchTodosRequest"),a=Object(n.b)("todos/fetchTodosSuccess"),u=Object(n.b)("todos/fetchTodosError"),o=Object(n.b)("todos/addTodoRequest"),i=Object(n.b)("todos/addTodoSuccess"),s=Object(n.b)("todos/addTodoError"),l=Object(n.b)("todos/deleteTodoRequest"),b=Object(n.b)("todos/deleteTodoSuccess"),d=Object(n.b)("todos/deleteTodoError"),f=Object(n.b)("todos/toggleCompletedRequest"),g=Object(n.b)("todos/toggleCompletedSuccess"),j=Object(n.b)("todos/toggleCompletedError"),O=Object(n.b)("todos/changeFilter")},76:function(e,t,r){},80:function(e,t,r){},81:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),a=r(22),u=r.n(a),o=r(14),i=r(8),s=r(45),l=r(5),b=function(e){return e.auth.isAuthenticated},d=function(e){return e.auth.user.name},f={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}};function g(){var e=Object(i.d)(b);return c.a.createElement("nav",null,c.a.createElement(o.b,{to:"/",exact:!0,style:f.link,activeStyle:f.activeLink},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),e&&c.a.createElement(o.b,{to:"/todos",exact:!0,style:f.link,activeStyle:f.activeLink},"\u0417\u0430\u043c\u0435\u0442\u043a\u0438"))}var j=r(23),O=r(46),p=r.n(O),h={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12}};function m(){var e=Object(i.c)(),t=Object(i.d)(d),r=Object(n.useCallback)((function(){e(j.a.logOut())}),[e]);return c.a.createElement("div",{style:h.container},c.a.createElement("img",{src:p.a,alt:"",width:"32",style:h.avatar}),c.a.createElement("span",{style:h.name},"Welcome, ",t),c.a.createElement("button",{type:"button",onClick:r},"Logout"))}var E={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},v=function(){return c.a.createElement("div",null,c.a.createElement(o.b,{to:"/register",exact:!0,style:E.link,activeStyle:E.activeLink},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),c.a.createElement(o.b,{to:"/login",exact:!0,style:E.link,activeStyle:E.activeLink},"\u041b\u043e\u0433\u0438\u043d"))},k={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B"}};function y(){var e=Object(i.d)(b);return c.a.createElement("header",{style:k.header},c.a.createElement(g,null),e?c.a.createElement(m,null):c.a.createElement(v,null))}var S=r(43),x=r(26);function C(e){e.isAuthenticated;var t=e.redirectTo,r=e.children,n=Object(x.a)(e,["isAuthenticated","redirectTo","children"]),a=Object(i.d)(b);return c.a.createElement(l.b,n,a?r:c.a.createElement(l.a,{to:t}))}function R(e){e.isAuthenticated;var t=e.redirectTo,r=e.children,n=Object(x.a)(e,["isAuthenticated","redirectTo","children"]),a=Object(i.d)(b);return c.a.createElement(l.b,n,a&&n.restricted?c.a.createElement(l.a,{to:t}):r)}var T=Object(n.lazy)((function(){return r.e(6).then(r.bind(null,93))})),q=Object(n.lazy)((function(){return r.e(5).then(r.bind(null,94))})),w=Object(n.lazy)((function(){return r.e(4).then(r.bind(null,95))})),U=Object(n.lazy)((function(){return r.e(3).then(r.bind(null,96))}));function A(){var e=Object(i.c)();return Object(n.useEffect)((function(){e(j.a.getCurrentUser())}),[e]),c.a.createElement(S.a,null,c.a.createElement(y,null),c.a.createElement(n.Suspense,{fallback:c.a.createElement("p",null,"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c...")},c.a.createElement(l.d,null,c.a.createElement(R,{exact:!0,path:"/"},c.a.createElement(T,null)),c.a.createElement(R,{path:"/register",restricted:!0,redirectTo:"/todos"},c.a.createElement(q,null)),c.a.createElement(R,{path:"/login",restricted:!0,redirectTo:"/todos"},c.a.createElement(w,null)),c.a.createElement(C,{path:"/todos",redirectTo:"/login"},c.a.createElement(U,null)))))}var L,z,B,I,W,F,D=r(27),J=r(1),M=r(16),N=r(47),G=r.n(N),H=r(2),K=r(6),P=r(7),Q=Object(J.c)([],(L={},Object(H.a)(L,P.j,(function(e,t){return t.payload})),Object(H.a)(L,P.c,(function(e,t){var r=t.payload;return[].concat(Object(D.a)(e),[r])})),Object(H.a)(L,P.g,(function(e,t){var r=t.payload;return e.filter((function(e){return e.id!==r}))})),Object(H.a)(L,P.m,(function(e,t){var r=t.payload;return e.map((function(e){return e.id===r.id?r:e}))})),L)),V=Object(J.c)(!1,(z={},Object(H.a)(z,P.i,(function(){return!0})),Object(H.a)(z,P.j,(function(){return!1})),Object(H.a)(z,P.h,(function(){return!1})),Object(H.a)(z,P.b,(function(){return!0})),Object(H.a)(z,P.c,(function(){return!1})),Object(H.a)(z,P.a,(function(){return!1})),Object(H.a)(z,P.f,(function(){return!0})),Object(H.a)(z,P.g,(function(){return!1})),Object(H.a)(z,P.e,(function(){return!1})),Object(H.a)(z,P.l,(function(){return!0})),Object(H.a)(z,P.m,(function(){return!1})),Object(H.a)(z,P.k,(function(){return!1})),z)),X=Object(J.c)("",Object(H.a)({},P.d,(function(e,t){return t.payload}))),Y=Object(J.c)(null,{}),Z=Object(K.c)({items:Q,filter:X,loading:V,error:Y}),$=r(3),_={name:null,email:null},ee=Object(J.c)(_,(B={},Object(H.a)(B,$.a.registerSuccess,(function(e,t){return t.payload.user})),Object(H.a)(B,$.a.loginSuccess,(function(e,t){return t.payload.user})),Object(H.a)(B,$.a.logoutSuccess,(function(){return _})),Object(H.a)(B,$.a.getCurrentUserSuccess,(function(e,t){return t.payload})),B)),te=Object(J.c)(null,(I={},Object(H.a)(I,$.a.registerSuccess,(function(e,t){return t.payload.token})),Object(H.a)(I,$.a.loginSuccess,(function(e,t){return t.payload.token})),Object(H.a)(I,$.a.logoutSuccess,(function(){return null})),I)),re=function(e,t){return t.payload},ne=Object(J.c)(null,(W={},Object(H.a)(W,$.a.registerError,re),Object(H.a)(W,$.a.loginError,re),Object(H.a)(W,$.a.logoutError,re),Object(H.a)(W,$.a.getCurrentUserError,re),W)),ce=Object(J.c)(!1,(F={},Object(H.a)(F,$.a.registerSuccess,(function(){return!0})),Object(H.a)(F,$.a.loginSuccess,(function(){return!0})),Object(H.a)(F,$.a.getCurrentUserSuccess,(function(){return!0})),Object(H.a)(F,$.a.registerError,(function(){return!1})),Object(H.a)(F,$.a.loginError,(function(){return!1})),Object(H.a)(F,$.a.getCurrentUserError,(function(){return!1})),Object(H.a)(F,$.a.logoutSuccess,(function(){return!1})),F)),ae=Object(K.c)({user:ee,isAuthenticated:ce,token:te,error:ne}),ue=Object(D.a)(Object(J.d)({serializableCheck:{ignoredActions:[M.a,M.f,M.b,M.c,M.d,M.e]}})),oe={key:"auth",storage:G.a,whitelist:["token"]},ie=Object(J.a)({reducer:{auth:Object(M.g)(oe,ae),todos:Z},middleware:ue,devTools:!1}),se=Object(M.h)(ie);r(79),r(80);u.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(i.a,{store:ie},c.a.createElement(s.a,{loading:null,persistor:se},c.a.createElement(o.a,null,c.a.createElement(A,null))))),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.9d349ae0.chunk.js.map